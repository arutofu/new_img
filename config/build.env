# ============================================================
# Base image (Raspberry Pi OS Lite, buster armhf)
# ============================================================
# ВАЖНО: Полный URL
BASE_URL="https://downloads.raspberrypi.org/raspios_lite_armhf/images/raspios_lite_armhf-2021-05-28/2021-05-07-raspios-buster-armhf-lite.zip"

# ============================================================
# Output
# ============================================================
OUT_NAME_PREFIX="image"

# На сколько расширяем образ на время установки/сборки (final)
EXPAND_TO="7G"
FINAL_FREE_MIB="200"

# ============================================================
# Middle stage (кэшируемый “тяжёлый” слой)
# ============================================================
# Можно оставить как EXPAND_TO
MIDDLE_EXPAND_TO="7G"

# Сколько свободного места оставить в middle.img (важно: чтобы
# хватало на быструю пересборку drone в final без повторной установки пакетов)
MIDDLE_FREE_MIB="2000"

# Принудительно пересобрать middle, даже если он уже есть:
# FORCE_MIDDLE="true"

# ============================================================
# User / SSH
# ============================================================
ENABLE_SSH="true"
PI_USER="pi"
PI_PASSWORD="raspberry"
# HOST_NAME="raspberry"   # опционально (если поддерживается модульно)

# ============================================================
# ROS + Drone toggles
# ============================================================
# В middle — INSTALL_ROS должен быть true, чтобы поставить ROS один раз.
INSTALL_ROS="true"
ROS_DISTRO="noetic"

# В final — если true, копируем workspace и собираем drone
INSTALL_DRONE="true"

# Путь к catkin_ws на хосте (копируется в /home/pi/catkin_ws в final)
DRONE_WS_SRC="./drone/catkin_ws"

# ============================================================
# Extra packages inside image (optional)
# ============================================================
EXTRA_APT_PACKAGES="git htop net-tools"

# ============================================================
# Доп. опции (опционально; почти всё имеет дефолты в scripts/chroot/lib/tasks.sh)
# ============================================================
# ENABLE_WIFI_AP="true"
# WIFI_COUNTRY="DE"
# WIFI_CHANNEL="7"
# WIFI_AP_IP="192.168.11.1"
# WIFI_AP_CIDR="24"
# WIFI_DHCP_START="192.168.11.20"
# WIFI_DHCP_END="192.168.11.200"
# WIFI_DHCP_LEASE="12h"
# WIFI_AP_PSK="dronewifi"
#
# ENABLE_FILEBROWSER="true"
# FILEBROWSER_PORT="8090"
#
# ENABLE_BUTTERFLY="true"
# BUTTERFLY_PORT="57575"
#
# ENABLE_WEB_VIDEO_SERVER="true"
# WEB_VIDEO_PORT="8080"
